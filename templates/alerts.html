<!-- templates/alerts.html -->
{% extends "base.html" %} {% block title %}Alerts - Nova Hub{% endblock %} {%
block breadcrumb %}
<nav class="breadcrumb">
    <ol>
        <li><a href="/dashboard">Dashboard</a></li>
        <li>Alerts</li>
    </ol>
</nav>
{% endblock %} {% block content %}
<h1>Sequence Gap Alerts</h1>

<p>
    These alerts indicate missing packet sequences. The game will report
    "Missing in Transit" if packets are not received.
</p>

{% if alerts %}
<article>
    <table role="grid">
        <thead>
            <tr>
                <th>League</th>
                <th>Route</th>
                <th>Expected Seq</th>
                <th>Detected</th>
                <th>Status</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for alert in alerts %}
            <tr id="alert-{{ alert.id }}">
                <td>{{ alert.league_name }}</td>
                <td class="mono">{{ alert.source }} → {{ alert.dest }}</td>
                <td class="mono">{{ alert.expected_sequence }}</td>
                <td>{{ alert.detected_at }}</td>
                <td>
                    {% if alert.resolved_at %}
                    <span class="badge success">Resolved</span>
                    {% else %}
                    <span class="badge error">Active</span>
                    {% endif %}
                </td>
                <td>
                    {% if not alert.resolved_at and current_user.is_admin %}
                    <form
                        method="POST"
                        action="/alerts/{{ alert.id }}/resolve"
                        style="margin: 0"
                    >
                        <button type="submit" class="outline">
                            Mark Resolved
                        </button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</article>
{% else %}
<article>
    <p><em>✅ No active alerts. All packet sequences are intact.</em></p>
</article>
{% endif %} {% endblock %}
