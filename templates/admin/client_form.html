<!-- templates/admin/client_form.html -->
{% extends "base.html" %} {% block title %}{% if client %}Edit{% else %}New{%
endif %} Client - Nova Hub{% endblock %} {% block breadcrumb %}
<nav class="breadcrumb">
    <ol>
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/admin">Admin</a></li>
        <li><a href="/admin/clients">Clients</a></li>
        <li>{% if client %}Edit{% else %}New{% endif %}</li>
    </ol>
</nav>
{% endblock %} {% block content %}
<h1>{% if client %}Edit{% else %}New{% endif %} Client</h1>

<article>
    <form method="POST">
        <label for="bbs_name">
            BBS Name
            <input
                type="text"
                id="bbs_name"
                name="bbs_name"
                value="{{ client.bbs_name if client else '' }}"
                required
            />
        </label>

        {% if client %}
        <label for="client_id">
            Client ID
            <input
                type="text"
                id="client_id"
                name="client_id"
                value="{{ client.client_id }}"
                readonly
                disabled
            />
            <small>Cannot be changed after creation</small>
        </label>

        <label>
            <input
                type="checkbox"
                name="is_active"
                {% if client.is_active %}checked{% endif %}
            />
            Active
        </label>
        {% else %}
        <label for="client_id">
            Client ID
            <input
                type="text"
                id="client_id"
                name="client_id"
                value=""
                required
            />
            <small>Used for OAuth authentication</small>
        </label>

        <div class="alert-box warning">
            <strong>Note:</strong> A random client secret will be generated and shown only once.
            Make sure to save it securely!
        </div>
        {% endif %}

        <button type="submit">
            {% if client %}Update{% else %}Create{% endif %} Client
        </button>
        <a href="/admin/clients" role="button" class="secondary">Cancel</a>
    </form>

    {% if client %}
    <hr>
    <h2>Danger Zone</h2>
    <article>
        <p><strong>Regenerate Client Secret:</strong> This will invalidate the current secret and generate a new one.</p>
        <a href="/admin/clients/{{ client.id }}/regenerate-secret" role="button" class="contrast">
            Regenerate Secret
        </a>
    </article>
    {% endif %}
</article>

{% endblock %}
